<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#0d6efd">
<link rel="manifest" href="manifest.json">

<title>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</title>

<style>
body{margin:0;font-family:system-ui;background:#f4f6f9}
header{background:#0d6efd;color:#fff;padding:14px;text-align:center}
#version{font-size:12px;opacity:.8}
main{padding:12px}
.card{background:#fff;border-radius:12px;padding:12px;margin-bottom:12px}
input,select,button{width:100%;padding:10px;margin-top:6px;font-size:14px}
button{background:#0d6efd;color:#fff;border:none;border-radius:8px}
.record{display:flex;justify-content:space-between;font-size:14px;padding:8px 0;border-bottom:1px solid #eee}
.income{color:#0d6efd}
.expense{color:#dc3545}
</style>
</head>

<body>

<header>
  üìä ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢
  <div id="version">v1.6.2</div>
</header>

<main>
  <div class="card">
    <input type="date" id="date">
    <input type="text" id="title" placeholder="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£">
    <input type="number" id="amount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
    <select id="type">
      <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
      <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
    </select>
    <button id="addBtn">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
  </div>

  <div class="card">
    <input type="text" id="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
  </div>

  <div class="card" id="list"></div>
</main>

<script>
const dateInput = document.getElementById("date");
const titleInput = document.getElementById("title");
const amountInput = document.getElementById("amount");
const typeInput = document.getElementById("type");
const list = document.getElementById("list");
const search = document.getElementById("search");

let records = JSON.parse(localStorage.getItem("records") || "[]");

dateInput.value = new Date().toISOString().slice(0,10);

function render() {
  const q = search.value.toLowerCase();
  list.innerHTML = "";
  records.filter(r => r.title.toLowerCase().includes(q))
    .forEach(r => {
      list.innerHTML += `
        <div class="record ${r.type}">
          <span>${r.date} ${r.title}</span>
          <span>${r.amount}</span>
        </div>`;
    });
}

document.getElementById("addBtn").onclick = () => {
  if (!titleInput.value || !amountInput.value) return;

  records.push({
    date: dateInput.value,
    title: titleInput.value,
    amount: +amountInput.value,
    type: typeInput.value
  });

  localStorage.setItem("records", JSON.stringify(records));
  titleInput.value = "";
  amountInput.value = "";
  render();
};

search.oninput = render;
render();

// service worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("./sw.js");
}
</script>

</body>
</html>
